<?php if ($pt->config->player_type == 'fluidPlayer') { ?>
	<link rel="stylesheet" href="{{CONFIG theme_url}}/player/css/fluidplayer/fluidplayer.min.css" type="text/css"/>
	<script src="{{CONFIG theme_url}}/player/js/fluidplayer/fluidplayer.min.js"></script>
	<link rel="stylesheet" href="{{CONFIG theme_url}}/player/css/mediaelementplayer.min.css" />
	<script src="{{CONFIG theme_url}}/player/js/mediaelement-and-player.min.js"></script>
<?php }elseif ($pt->config->player_type == 'videojs') { ?>
	<script src="http://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
	<link href="{{CONFIG theme_url}}/player/css/video_js/video-js.css" rel="stylesheet">
	<link href="{{CONFIG theme_url}}/player/css/video_js/videojs-contrib-ads.min.css" rel="stylesheet">
	<link href="{{CONFIG theme_url}}/player/css/video_js/videojs-resolution-switcher.css" rel="stylesheet">
	<link href="{{CONFIG theme_url}}/player/css/video_js/videojs.ima.css" rel="stylesheet">
	<link rel="stylesheet" href="{{CONFIG theme_url}}/player/css/mediaelementplayer.min.css" />
	<script src="{{CONFIG theme_url}}/player/js/mediaelement-and-player.min.js"></script>
<?php }else{ ?>
	<link rel="stylesheet" href="{{CONFIG theme_url}}/player/css/mediaelementplayer.min.css" />
	<script src="{{CONFIG theme_url}}/player/js/mediaelement-and-player.min.js"></script>
	<link rel="stylesheet" href="{{CONFIG theme_url}}/player/css/mejs-dark.css" />
<?php } ?>
<script src="{{CONFIG theme_url}}/player/plugins/speed/speed.min.js"></script>
<link rel="stylesheet" href="{{CONFIG theme_url}}/player/plugins/speed/speed.min.css" />
<script src="{{CONFIG theme_url}}/player/plugins/speed/speed-i18n.js"></script>
<script src="{{CONFIG theme_url}}/player/plugins/jump/jump-forward.min.js"></script>
<link rel="stylesheet" href="{{CONFIG theme_url}}/player/plugins/jump/jump-forward.min.css" />
<script src="{{CONFIG theme_url}}/player/plugins/ads/ads.min.js"></script>
<link rel="stylesheet" href="{{CONFIG theme_url}}/player/plugins/ads/ads.min.css" />
<script src="{{CONFIG theme_url}}/player/plugins/ads/ads-i18n.js"></script>
<script src="{{CONFIG theme_url}}/player/plugins/vast/ads-vast-vpaid.js"></script>
<script src="{{CONFIG theme_url}}/player/plugins/quality/quality.min.js"></script>
<link rel="stylesheet" href="{{CONFIG theme_url}}/player/plugins/quality/quality.min.css" />
<script src="https://cdn.jsdelivr.net/npm/mediaelement@4.2.7/build/renderers/facebook.min.js"></script>

<script src="{{CONFIG theme_url}}/player/plugins/chromecast/chromecast.min.js"></script>

<script src="{{CONFIG theme_url}}/player/plugins/context-menu/context-menu.min.js"></script>
<script src="{{CONFIG theme_url}}/player/plugins/context-menu/context-menu-i18n.js"></script>

<link rel="stylesheet" href="{{CONFIG theme_url}}/player/plugins/context-menu/context-menu.min.css" />

<link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">
<?php if ($pt->config->credit_card == 'yes') { ?>
<script type="text/javascript" charset="utf8" src="{{CONFIG theme_url}}/js/stripe.js"></script>
<?php } ?>

<style>
body {background: #fff;}
<?php if (!empty($pt->get_video->youtube)) { ?>
.mejs__jump-forward-button {margin-left: auto;}
<?php } ?>
</style>
<div class="video-player-page">
	<div class="vid_resize_plyr_bg"></div>
	<div class="vid_reszz_row">
		<div class="player-video yp_pub_elemnt">
			<?php if ($pt->continent_hide == false) { ?>
			<?php if ((($pt->config->sell_videos_system == 'on' && $pt->get_video->sell_video > 0 && $pt->get_video->owner->subscriber_price == 0) || ($pt->get_video->sell_video == 0 && $pt->get_video->owner->subscriber_price == 0)) || ($pt->config->payed_subscribers == 'on' && ($pt->get_video->owner->subscriber_price > 0 || $pt->get_video->owner->subscriber_price == 0) ) || $pt->get_video->is_owner ) { ?>
			<?php if (($pt->get_video->owner->subscriber_price == 0 || ($pt->get_video->owner->subscriber_price > 0 && $pt->show_user_video == 1)) || ($pt->config->sell_videos_system == 'on' && $pt->get_video->sell_video > 0)  || $pt->get_video->is_owner) { if ($pt->get_video->sell_video == 0 || $pt->get_video->is_owner || $pt->video_approved == false  || !empty($pt->get_video->demo) || ($pt->get_video->sell_video > 0 && $pt->is_paid > 0)) { ?>
			<?php if ($pt->video_approved == true || PT_IsAdmin()) { ?>
			<?php if ($pt->get_video->age == false || PT_IsAdmin()) { ?>
			<?php if ($pt->video_type == 'public' || PT_IsAdmin()) { ?> 
				<div class="video-player pt_video_player {{USR_AD_TRANS}}">
					
					<?php if (!empty($pt->get_video->demo) && PT_GetMedia($pt->get_video->demo) == $pt->get_video->video_location) { ?>
						<?php if (!IS_LOGGED) { ?>
							<button class="btn btn-main" onselectstart="return false" onclick="location.href = site_url+'/login';">{{LANG pay}} {{CURRENCY}}<?php echo $pt->get_video->sell_video; ?> </button>
						<?php } else{ ?>
							<button class="btn btn-main p_t_show_btn_" onselectstart="return false" onclick="pay_to_see(<?php echo $pt->get_video->id; ?>,<?php echo $pt->get_video->sell_video; ?>)">{{LANG pay}} {{CURRENCY}}<?php echo $pt->get_video->sell_video; ?> </button>
						<?php } ?>
					<?php } ?>
					
					<?php if (!empty($pt->config->watermark)) { ?>
						<div class="watermark">
							<a href="{{CONFIG site_url}}"><img src="{{CONFIG watermark}}" alt='watermark logo'></a>
						</div>
					<?php } ?>
					<?php if ($pt->converted === true && $pt->in_queue == false): ?>
						<?php if (!empty($pt->get_video->facebook)) { ?>
							<div class="fb-video" data-href="https://www.facebook.com/<?php echo urldecode($pt->get_video->facebook) ?>" data-width="500" data-show-text="false"></div>
						<?php } else if (!empty($pt->get_video->ok)) {?>
							<div class="embed-responsive embed-responsive-16by9"><iframe width="100%" src="//ok.ru/videoembed/<?php echo $pt->get_video->ok ?>" allowfullscreen></iframe></div>
						<?php } else if (!empty($pt->get_video->vimeo)) {?>
							<div class="embed-responsive embed-responsive-16by9"><iframe src="https://player.vimeo.com/video/{{VIDEO_ID}}?api=1;title=0&amp;byline=0&amp;portrait=0&amp;autoplay=1" width="100%" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>
						<?php } else if (!empty($pt->get_video->daily)) { ?>
							<div class="embed-responsive embed-responsive-16by9"><iframe width="100%" src="//www.dailymotion.com/embed/video/{{VIDEO_ID}}?PARAMS" allowfullscreen></iframe></div>
						<?php } else if (!empty($pt->get_video->twitch)) { 
							if ($pt->get_video->twitch_type != 'streams') {
							if ($pt->get_video->twitch_type == 'videos') {
								$link = 'https://player.twitch.tv/?video='.$pt->get_video->twitch;
							}
							else{
								$link = 'https://clips.twitch.tv/embed?clip='.$pt->get_video->twitch;
							}
						?>
							<div class="embed-responsive embed-responsive-16by9"><iframe width="100%" src="<?php echo($link) ?>&autoplay=false" allowfullscreen></iframe></div>
						<?php }else{ ?>
							<div class="embed-responsive embed-responsive-16by9"><div id="twitch_player__"></div></div>
							<script type="text/javascript">
								var options = {
									width: '100%',
									channel: "<?php echo($pt->get_video->twitch) ?>",
								};
								var player = new Twitch.Player("twitch_player__", options);
							</script>
						<?php } ?>
						<?php } else {  ?>
							<div class="embed-responsive embed-responsive-16by9">
							<video id="my-video<?php if ($pt->config->player_type == 'fluidPlayer') { ?>_<?php echo $pt->get_video->id; ?><?php } ?>" controls  <?php if ($pt->config->player_type == 'videojs') { ?>   class="video-js" data-setup=''  <?php } ?> <?php if (empty($pt->ad_image)) { ?>  <?php } ?> style="width:100%; height:100%;position: relative;" data-cast-title="{{TITLE}}" poster="{{THUMBNAIL}}" >
								<?php if (!empty($pt->video_4096)) { ?>
									<source src="{{VIDEO_LOCATION_4096}}" type="{{VIDEO_TYPE}}" data-quality="4K" title='4K' label='4K' res='4096'>
								<?php } ?>
								<?php if (!empty($pt->video_2048)) { ?>
									<source src="{{VIDEO_LOCATION_2048}}" type="{{VIDEO_TYPE}}" data-quality="2K" title='2K' label='2K' res='2048'>
								<?php } ?>
								<?php if (!empty($pt->video_1080)) { ?>
									<source src="{{VIDEO_LOCATION_1080}}" type="{{VIDEO_TYPE}}" data-quality="1080p" title='1080p' label='1080p' res='1080'>
								<?php } ?>
								<?php if (!empty($pt->video_720)) { ?>
									<source src="{{VIDEO_LOCATION_720}}" type="{{VIDEO_TYPE}}" data-quality="720p" title='720p' label='720p' res='720'>
								<?php } ?>
								<?php if (!empty($pt->video_480)) { ?>
									<source src="{{VIDEO_LOCATION_480}}" type="{{VIDEO_TYPE}}" data-quality="480p" title='480p' label='480p' res='480'>
								<?php } ?>
								<?php if (!empty($pt->video_360)) { ?>
									<source src="{{VIDEO_LOCATION_360}}" type="{{VIDEO_TYPE}}" data-quality="360p" title='360p' label='360p' res='360'>
								<?php } ?>
								<?php if (!empty($pt->video_240)) { ?>
									<source src="{{VIDEO_LOCATION_240}}" type="{{VIDEO_TYPE}}" data-quality="240p" title='240p' label='240p' res='240'>
								<?php } ?>
								<?php if (!empty($pt->get_video->youtube) || (!empty($pt->get_video->video_location) && empty($pt->video_360))) { ?>
									<source src="{{VIDEO_LOCATION}}" type="{{VIDEO_TYPE}}" data-quality="<?php echo(!empty($pt->video_quality) ? $pt->video_quality : '360p') ?>" title='<?php echo(!empty($pt->video_quality) ? $pt->video_quality : '360p') ?>' label='<?php echo(!empty($pt->video_quality) ? $pt->video_quality : '360p') ?>' res='<?php echo(!empty($pt->video_res) ? $pt->video_res : '360') ?>'>
								<?php } ?>
								Your browser does not support HTML5 video.
								<!-- //src="http://www.youtube.com/watch?v=nOEw9iiopwI" type="video/youtube" -->
							</video>
							</div>
							<?php if (!empty($pt->ad_image)) { ?>
								<a href="{{AD_P_LINK}}" class="ad-link" target="_blank">
									<div class="ad-image">
										<div class="ads-test"><i class="fa fa-bullhorn"></i> Advertisement will close in <span class="timer">(<span>{{AD_SKIP_NUM}}</span>)</span></div>
										<img src="{{AD_IMAGE}}" alt="Ads" />
									</div>
								</a>
							<?php } ?>
							<?php if ($pt->config->resize_video == 'on') { ?>
								<div class="icons hidde">
									<span class="expend-player"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z" /></svg></span>
								</div>
							<?php } ?>
						<?php } ?>
						{{USER_ADS_DESC_OVERLAY}}
					<?php else: ?>
						<div class="vid_emp_msg">
							<img src="{{THUMBNAIL}}" alt="">
							<style>.vid_emp_msg_details:before {background-image: url({{THUMBNAIL}});}</style>
							<div class="vid_emp_msg_innr">
								<div class="vid_emp_msg_details">
									<div class="pro_black"></div>
									<div class="vid_emp_msg_empty_state">
										<div>
											<?php if ($pt->in_queue == true) { ?>
												<?php if (!empty($pt->video_owner)): ?>
												<h3>{{LANG ur_video_queue}}</h3>
												<?php else: ?>
												<h3>{{LANG this_video_queue}}</h3>
												<?php endif; ?>
											<?php }else{ ?>
												<svg viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg"> <defs> <linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"> <stop stop-color="#000" stop-opacity="0" offset="0%"/> <stop stop-color="#000" stop-opacity=".631" offset="63.146%"/> <stop stop-color="#000" offset="100%"/> </linearGradient> </defs> <g fill="none" fill-rule="evenodd"> <g transform="translate(1 1)"> <path d="M36 18c0-9.94-8.06-18-18-18" id="Oval-2" stroke="url(#a)" stroke-width="2"> <animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite" /> </path> <circle fill="#000" cx="36" cy="18" r="1"> <animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite" /> </circle> </g> </g> </svg>
												<?php if (!empty($pt->video_owner)): ?>
												<h3>{{LANG ur_video_porcessing}}</h3>
												<?php else: ?>
												<h3>{{LANG this_video_porcessing}}</h3>
												<?php endif; ?>
											<?php } ?>
										</div>
									</div>
								</div>
							</div>
						</div>
					<?php endif; ?>      
				</div>
				<div class="clear"></div>
			<?php } else { ?>
				<div class="vid_emp_msg">
					<img src="{{THUMBNAIL}}" alt="">
					<style>.vid_emp_msg_details:before {background-image: url({{THUMBNAIL}});}</style>
					<div class="vid_emp_msg_innr">
						<div class="vid_emp_msg_details">
							<div class="pro_black"></div>
							<div class="vid_emp_msg_empty_state">
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z" /></svg>
									<h3>{{LANG video_private_text}}</h3>
								</div>
							</div>
						</div>
					</div>
				</div>
			<?php } ?>
			<?php } else { ?>
				<div class="vid_emp_msg">
					<img src="{{THUMBNAIL}}" alt="">
					<style>.vid_emp_msg_details:before {background-image: url({{THUMBNAIL}});}</style>
					<div class="vid_emp_msg_innr">
						<div class="vid_emp_msg_details">
							<div class="pro_black"></div>
							<div class="vid_emp_msg_empty_state">
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M15,14C17.67,14 23,15.33 23,18V20H7V18C7,15.33 12.33,14 15,14M15,12A4,4 0 0,1 11,8A4,4 0 0,1 15,4A4,4 0 0,1 19,8A4,4 0 0,1 15,12M5,9.59L7.12,7.46L8.54,8.88L6.41,11L8.54,13.12L7.12,14.54L5,12.41L2.88,14.54L1.46,13.12L3.59,11L1.46,8.88L2.88,7.46L5,9.59Z" /></svg>
									<h3>{{LANG age_restrict_text}}</h3>
									<?php if (!IS_LOGGED) { ?>
										<p>{{LANG age_restrcit_text_2}}</p>
									<?php } ?>
								</div>
							</div>
						</div>
					</div>
				</div>
			<?php } ?>
			<?php } else { ?>
				<div class="vid_emp_msg">
					<img src="{{THUMBNAIL}}" alt="">
					<style>.vid_emp_msg_details:before {background-image: url({{THUMBNAIL}});}</style>
					<div class="vid_emp_msg_innr">
						<div class="vid_emp_msg_details">
							<div class="pro_black"></div>
							<div class="vid_emp_msg_empty_state">
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M13,2.03V2.05L13,4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03M11,2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06M4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1L4.26,5.67M2.06,13C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13H2.06M7.1,18.37L5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z" /></svg>
									<h3>{{LANG video_approve_text}}</h3>
								</div>
							</div>
						</div>
					</div>
				</div>
			<?php } ?>
			<?php }else{ ?>
				<div class="vid_emp_msg">
					<img src="{{THUMBNAIL}}" alt="">
					<style>.vid_emp_msg_details:before {background-image: url({{THUMBNAIL}});}</style>
					<div class="vid_emp_msg_innr">
						<div class="vid_emp_msg_details">
							<div class="pro_black"></div>
							<div class="vid_emp_msg_empty_state">
								<div>
									<h3>{{LANG pay_to_see}}</h3>
									<p>
									<?php if ($pt->get_video->owner->subscriber_price) {
										$text = str_replace('{{PRICE}}', $pt->currency.$pt->get_video->owner->subscriber_price, $lang_array['buy_or_subscribe']);
										$text = str_replace('{{USERNAME}}',$pt->get_video->owner->name, $text);
										echo($text);
									?>
									<?php } ?>
									</p>
								</div>
								<?php if (!IS_LOGGED) { ?>
									<button class="btn btn_primary" onselectstart="return false" onclick="location.href = site_url+'/login';">{{LANG pay}} {{CURRENCY}}<?php echo $pt->get_video->sell_video; ?></button>
									<?php if ($pt->get_video->owner->subscriber_price) { ?>
										<button class="btn btn_primary" onselectstart="return false"onclick="location.href = site_url+'/login';">{{LANG subscribe}} {{CURRENCY}}<?php echo $pt->get_video->owner->subscriber_price; ?></button>
									<?php } ?>
								<?php } else{ ?>
									<button class="btn btn_primary" onselectstart="return false" onclick="pay_to_see(<?php echo $pt->get_video->id; ?>,<?php echo $pt->get_video->sell_video; ?>)">{{LANG pay}} {{CURRENCY}}<?php echo $pt->get_video->sell_video; ?></button>
									<?php if ($pt->get_video->owner->subscriber_price) { ?>
										<button class="btn btn_primary" onselectstart="return false" onclick="PT_PaySubscribe(<?php echo $pt->get_video->user_id; ?>,this,'subscribe')">{{LANG subscribe}} {{CURRENCY}}<?php echo $pt->get_video->owner->subscriber_price; ?></button>
								<?php } } ?>
							</div>
						</div>
					</div>
				</div>
			<?php } ?>
			<?php }else{ ?>
				<div class="vid_emp_msg">
					<img src="{{THUMBNAIL}}" alt="">
					<style>.vid_emp_msg_details:before {background-image: url({{THUMBNAIL}});}</style>
					<div class="vid_emp_msg_innr">
						<div class="vid_emp_msg_details">
							<div class="pro_black"></div>
							<div class="vid_emp_msg_empty_state">
								<div>
									<h3>
									<?php if ($pt->get_video->owner->subscriber_price) {
										echo(str_replace('{{PRICE}}', $pt->currency.$pt->get_video->owner->subscriber_price, $lang_array['subscribe_to_see']));
									?>
									<?php } ?>
									</h3>
								</div>
								<?php if (!IS_LOGGED) { ?>
									<button class="btn btn_primary" onselectstart="return false" onclick="location.href = site_url+'/login';">{{LANG subscribe}} {{CURRENCY}}<?php echo $pt->get_video->owner->subscriber_price; ?></button>
								<?php } else{ ?>
									<?php if ($pt->get_video->owner->subscriber_price) { ?>
										<button class="btn btn_primary" onselectstart="return false" onclick="PT_PaySubscribe(<?php echo $pt->get_video->user_id; ?>,this,'subscribe')">{{LANG subscribe}} {{CURRENCY}}<?php echo $pt->get_video->owner->subscriber_price; ?></button>
								<?php } } ?>
							</div>
						</div>
					</div>
				</div>
			<?php } }else{ ?>
				<div class="vid_emp_msg">
					<img src="{{THUMBNAIL}}" alt="">
					<style>.vid_emp_msg_details:before {background-image: url({{THUMBNAIL}});}</style>
					<div class="vid_emp_msg_innr">
						<div class="vid_emp_msg_details">
							<div class="pro_black"></div>
							<div class="vid_emp_msg_empty_state">
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M3.27,2L2,3.27L4.73,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16C16.2,18 16.39,17.92 16.54,17.82L19.73,21L21,19.73M21,6.5L17,10.5V7A1,1 0 0,0 16,6H9.82L21,17.18V6.5Z" /></svg>
									<h3>{{LANG video_not_available}}</h3>
								</div>
							</div>
						</div>
					</div>
				</div>
		    <?php } } else{ ?>
				<div class="vid_emp_msg">
					<img src="{{THUMBNAIL}}" alt="">
					<style>.vid_emp_msg_details:before {background-image: url({{THUMBNAIL}});}</style>
					<div class="vid_emp_msg_innr">
						<div class="vid_emp_msg_details">
							<div class="pro_black"></div>
							<div class="vid_emp_msg_empty_state">
								<div>
									<?php if (empty($_COOKIE['r'])) { ?>
										<a href="{{URL}}" data-load="?link1=watch&id={{VIDEO_ID_}}" id="redirect_to_video_page"></a>
									<?php  } else if (!in_array(base64_decode($_COOKIE['r']), $pt->continents)) { ?>
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M17.9,17.39C17.64,16.59 16.89,16 16,16H15V13A1,1 0 0,0 14,12H8V10H10A1,1 0 0,0 11,9V7H13A2,2 0 0,0 15,5V4.59C17.93,5.77 20,8.64 20,12C20,14.08 19.2,15.97 17.9,17.39M11,19.93C7.05,19.44 4,16.08 4,12C4,11.38 4.08,10.78 4.21,10.21L9,15V16A2,2 0 0,0 11,18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>
										<h3>{{LANG unknown_location}}</h3>
									<?php  } else{ ?>
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M16.37,16.1L11.75,11.47L11.64,11.36L3.27,3L2,4.27L5.18,7.45C5.06,7.95 5,8.46 5,9C5,14.25 12,22 12,22C12,22 13.67,20.15 15.37,17.65L18.73,21L20,19.72M12,6.5A2.5,2.5 0 0,1 14.5,9C14.5,9.73 14.17,10.39 13.67,10.85L17.3,14.5C18.28,12.62 19,10.68 19,9A7,7 0 0,0 12,2C10,2 8.24,2.82 6.96,4.14L10.15,7.33C10.61,6.82 11.26,6.5 12,6.5Z" /></svg>
										<h3>{{LANG video_not_available_location}}</h3>
									<?php } ?>
								</div>
							</div>
						</div>
					</div>
				</div>
		    <?php } ?>
			<div class="clear"></div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-md-1"></div>
        <div class="col-md-10">
			<div class="video-title vp_watch_vid_info">
				<input type="hidden" value="{{ID}}" id="video-id">
				<?php if ($pt->get_video->sell_video > 0 && PT_IsAdmin()) { ?>
					<div class="alert alert-info">
						<p>{{LANG admin_can_see}}</p>{{LANG video_price}} {{CURRENCY}}<?php echo $pt->get_video->sell_video; ?> 
					</div>
				<?php } ?>
				<div class="video-big-title">
					<h1 itemprop="title">{{TITLE}} <?php if ($pt->get_video->sell_video > 0) { ?><?php if ($pt->video_approved == true) { ?><i class="fa fa-check-circle fa-fw verified" title="{{LANG video_verified}}"></i><?php } ?><?php } ?></h1>
				</div>
				<div class="video-views">
					<?php if ($pt->get_video->privacy == 1) { ?>
						<span class="private-text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z" /></svg> {{LANG private}}</span>
					<?php } ?>
					<?php if ($pt->get_video->privacy == 2) { ?>
						<span class="private-text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M3,13V11H15V13H3M3,6H21V8H3V6M3,18V16H9V18H3M22,22H14V18H15V17A3,3 0 0,1 18,14A3,3 0 0,1 21,17V18H22V22M18,16A1,1 0 0,0 17,17V18H19V17A1,1 0 0,0 18,16Z" /></svg> {{LANG unlisted}}</span>
					<?php } ?>
					<span id="video-views-count">{{VIEWS}}</span> {{LANG views}}
					<?php if ($pt->get_video->sell_video > 0) { ?>
						&nbsp;&nbsp;<span><?php echo $pt->purchased; ?> {{LANG purchased}}</span>
					<?php } ?>
					<div class="video-info-element">
						<div class="views-bar" style="width: {{DISLIKES_P}}%"></div>
						<div class="views-bar blue" style="width: {{LIKES_P}}%"></div>
						<div class="clear"></div>
					</div>
				</div>
				<div class="video-options">
					<?php if (($pt->config->sell_videos_system == 'on') || $pt->get_video->sell_video == 0 ) { ?>
						<div class="btn btn_opts liki_btn {{LIKE_ACTIVE_CLASS}}" id="likes-bar" title="{{LANG likes}}" onclick="Wo_LikeSystem('{{ID}}', 'like', this, 'is_ajax')" data-likes="{{RAEL_LIKES}}" {{ISLIKED}}>
							<span>
								<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="thumbs_up">
									<path fill="currentColor" d="M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10M1,21H5V9H1V21Z" />
								</svg>
							</span> 
							<p class="likes" id="likes">{{LIKES}}</p>
						</div>
						<div class="btn btn_opts disi_btn {{DIS_ACTIVE_CLASS}}" id="dislikes-bar" title="{{LANG dislikes}}" onclick="Wo_LikeSystem('{{ID}}', 'dislike', this, 'is_ajax')" data-likes="{{RAEL_DISLIKES}}" {{ISDISLIKED}}>
							<span>
								<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="thumbs_down">
									<path fill="currentColor" d="M19,15H23V3H19M15,3H6C5.17,3 4.46,3.5 4.16,4.22L1.14,11.27C1.05,11.5 1,11.74 1,12V14A2,2 0 0,0 3,16H9.31L8.36,20.57C8.34,20.67 8.33,20.77 8.33,20.88C8.33,21.3 8.5,21.67 8.77,21.94L9.83,23L16.41,16.41C16.78,16.05 17,15.55 17,15V5C17,3.89 16.1,3 15,3Z" />
								</svg>
							</span> 
							<p class="likes" id="dislikes">{{DISLIKES}}</p>
						</div>
						<div class="btn btn_opts scam_btn {{SCAM_ACTIVE_CLASS}}" id="scam-bar" title="Scam" onclick="Wo_LikeSystem('{{ID}}', 'scam', this, 'is_ajax')" data-legit="{{RAEL_SCAM}}" {{ISSCAM}}>
							<span id="scambutton">
								<i class="fa fa-ban" style="font-size:20px"></i>
							</span> 
							<p class="likes" id="scam">{{SCAM}}</p>
						</div>
						<div class="btn btn_opts legit_btn {{LEGIT_ACTIVE_CLASS}}" id="legit-bar" title="Legit" onclick="Wo_LikeSystem('{{ID}}', 'legit', this, 'is_ajax')" data-legit="{{RAEL_LEGIT}}" {{ISLEGIT}}>
							<span id="legitbutton">
								<i class="fa fa-check-circle-o" style="font-size:20px"></i>
							</span> 
							<p class="likes" id="legit">{{LEGIT}}</p>
						</div>
					<?php } ?>
					<button class="btn btn_opts" data-toggle="modal" data-target="#share_box">
						<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z" /></svg></span> <p>{{LANG share}}</p>
					</button>
					<?php 
						if (($pt->config->payed_subscribers == 'on' && $pt->get_video->owner->subscriber_price > 0 && $pt->is_paid > 0) || ($pt->config->payed_subscribers == 'off') || ($pt->config->payed_subscribers == 'on' && $pt->get_video->owner->subscriber_price == 0) ) {
						if ($pt->config->download_videos == 'on' && empty($pt->get_video->daily) && empty($pt->get_video->vimeo) && empty($pt->get_video->youtube) && $pt->get_video->converted == 1 && empty($pt->get_video->facebook) && $pt->get_video->age == false && $pt->video_approved == true) { ?>
					<?php if ($pt->get_video->sell_video == 0) { ?>
					<?php if ($pt->get_video->privacy != 1 || ($pt->get_video->privacy == 1 && $pt->get_video->is_owner)) { ?>
						<button class="btn btn_opts" data-toggle="modal" data-target="#download_box">
							<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
								<path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
							</svg></span> <p>{{LANG download}}</p>
						</button>
					<?php } } } ?>
					<?php } ?>
					<?php if (IS_LOGGED): ?>
						<button class="btn btn_opts" onclick="PT_AddToList('{{ID}}');">
							<span>
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
									<path fill="currentColor" d="M2,16H10V14H2M18,14V10H16V14H12V16H16V20H18V16H22V14M14,6H2V8H14M14,10H2V12H14V10Z" />
								</svg>
							</span> 
							<p>{{LANG add_to}}</p>
						</button>
						<?php if ($pt->get_video->is_owner == false) { ?>
							<button class="btn btn_opts" data-toggle="modal" data-target="#report_box">
								<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M14.4,6L14,4H5V21H7V14H12.6L13,16H20V6H14.4Z" /></svg></span> <p>{{LANG report}}</p>
							</button>
						<?php }  ?>
					<?php endif; ?>
					<?php if (IS_LOGGED && $pt->get_video->is_owner == false && $pt->config->donate_system == 'on' && !empty($pt->user_data->crypto_wallet_address) && $pt->get_video->sell_video == 0) { ?>
						<button class="btn btn_opts" data-toggle="modal" data-target="#donate_box">
							<span>
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
									<path fill="currentColor" d="M22,12V20A2,2 0 0,1 20,22H4A2,2 0 0,1 2,20V12A1,1 0 0,1 1,11V8A2,2 0 0,1 3,6H6.17C6.06,5.69 6,5.35 6,5A3,3 0 0,1 9,2C10,2 10.88,2.5 11.43,3.24V3.23L12,4L12.57,3.23V3.24C13.12,2.5 14,2 15,2A3,3 0 0,1 18,5C18,5.35 17.94,5.69 17.83,6H21A2,2 0 0,1 23,8V11A1,1 0 0,1 22,12M4,20H11V12H4V20M20,20V12H13V20H20M9,4A1,1 0 0,0 8,5A1,1 0 0,0 9,6A1,1 0 0,0 10,5A1,1 0 0,0 9,4M15,4A1,1 0 0,0 14,5A1,1 0 0,0 15,6A1,1 0 0,0 16,5A1,1 0 0,0 15,4M3,8V10H11V8H3M13,8V10H21V8H13Z" />
								</svg>
							</span> 
							<p>{{LANG donate}}</p>
						</button>
					<?php } ?>
					<?php if ($pt->get_video->is_owner == true) { ?>
						<a class="btn btn_opts" href="{{LINK edit-video/{{ID}}}}" data-load="?link1=edit-video&id=category&id={{ID}}">
							<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M2,6V8H14V6H2M2,10V12H14V10H2M20.04,10.13C19.9,10.13 19.76,10.19 19.65,10.3L18.65,11.3L20.7,13.35L21.7,12.35C21.92,12.14 21.92,11.79 21.7,11.58L20.42,10.3C20.31,10.19 20.18,10.13 20.04,10.13M18.07,11.88L12,17.94V20H14.06L20.12,13.93L18.07,11.88M2,14V16H10V14H2Z" /></svg></span> <p>{{LANG edit_video}}</p>
						</a> 
					<?php } ?>
					<?php if ($pt->get_video->is_owner) { ?>
						<a href="{{LINK view_analytics/{{VIDEO_ID_}}}}&type=today" class="btn btn_opts" data-load="?link1=view_analytics&id={{VIDEO_ID_}}&type=today" data-rep="1">
							<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M20,12c-0.249,0-0.483,0.051-0.703,0.133l-2.398-1.963C16.958,9.956,17,9.734,17,9.5C17,8.114,15.886,7,14.5,7 S12,8.114,12,9.5c0,0.396,0.1,0.765,0.262,1.097l-2.909,3.438C9.237,14.015,9.121,14,9,14c-0.179,0-0.348,0.03-0.512,0.074 l-2.563-2.563C5.97,11.348,6,11.179,6,11c0-1.108-0.892-2-2-2s-2,0.892-2,2s0.892,2,2,2c0.179,0,0.348-0.03,0.512-0.074 l2.563,2.563C7.03,15.652,7,15.821,7,16c0,1.108,0.892,2,2,2s2-0.892,2-2c0-0.237-0.048-0.46-0.123-0.671l2.913-3.442 C14.017,11.953,14.252,12,14.5,12c0.411,0,0.792-0.107,1.133-0.281l2.399,1.963C18.016,13.786,18,13.891,18,14c0,1.108,0.892,2,2,2 s2-0.892,2-2S21.108,12,20,12z"/></svg></span> <p>{{LANG analytics}}</p>
						</a>
					<?php } ?>
				</div>
				<div class="row">
					<div class="col-md-8">
						<div class="publisher-element">
							<div class="publisher-avatar">
								<a href="{{USER url}}" data-load="?link1=timeline&id={{USER username}}"><img src="{{USER avatar}}" alt="{{USER name}}"></a>
							</div>
							<div class="publisher-name">
								<a href="{{USER url}}" data-load="?link1=timeline&id={{USER username}}">{{USER name_v}}</a>
								<div title="{{LANG published_on}}{{TIME}}" class="time">{{TIME}}</div>
							</div>
							<!-- <div class="publisher-subscribe-button">
								<button class="btn-subscribe" data-toggle="modal" data-target="#donate_box">
									<img src="{{CONFIG theme_url}}/img/exenos.png" style="height:19px;width:19px;margin-right:3px;">Donate
								</button>

							</div> -->
							<div class="publisher-subscribe-button">{{SUBSCIBE_BUTTON}}</div>
							<div class="clear"></div>
						</div>
						<div class="clear"></div>
						<div class="watch-video-description vp_watch_vid_desc_length">
							<p dir="auto" itemprop="description">{{DESC}}</p>
							<ul class="list-unstyled vid_mov_e_info">
								<li>
									<h4>{{LANG category}} </h4>
									<p><a href="{{LINK videos/category/{{CATEGORY_ID}}}}" data-load="?link1=videos&page=category&id={{CATEGORY_ID}}">{{CATEGORY}}</a></p>
								</li>
								<?php if (!empty($pt->sub_category)) { ?>
									<li>
										<h4>{{LANG sub_category}} </h4>
										<p><a href="{{LINK videos/category/{{CATEGORY_ID}}/<?php echo($pt->get_video->sub_category) ?>}}" data-load="?link1=videos&page=category&id={{CATEGORY_ID}}&sub_id=<?php echo($pt->get_video->sub_category) ?>">{{SUB_CATEGORY}}</a></p>
									</li>
								<?php  } ?>
							</ul>
						</div>
						<div class="watch-video-show-more desc vp_vid_page_lmore">{{LANG show_more}}</div>
					</div>
					<div class="col-md-4 next-video-cont">
						<?php if ($pt->config->autoplay_system == 'on') { ?>
							<div class="next-video">
								<div class="next-text pull-left">
									<h4>{{LANG up_next}}</h4>
								</div>
								<div class="vp_custm_chk pull-right">
									<input id="autoplay" type="checkbox" {{COOKIE}} class="autoplay-video">
									<label for="autoplay">{{LANG autoplay}}</label>
								</div>
								<div class="clear"></div>
							</div>
							<div class="videos-list" id="next-video">
								{{VIDEO_NEXT_SIDEBAR}}
							</div>
						<?php } ?>
						<div class="ads-placment">{{WATCH_SIDEBAR_AD}}</div>
					</div>
				</div>
				<hr>
			</div>
        </div>
		<div class="col-md-1"></div>
	</div>
	<div class="vid_relat_vids">
		<div class="videos-list related-videos cus_rel_vid_slide">
			{{VIDEO_SIDEBAR}}
		</div>
		<!-- <div class="load-related-videos">
			<button class="btn btn-default" id="load-related-videos">
				<span>{{LANG load_more}}</span><i class="fa fa-circle-o-notch spin hidden"></i>
			</button>
		</div> -->
	</div>
	<div class="clear"></div>
	<div class="row">
		<div class="col-md-1"></div>
		<div class="col-md-10">
			<hr>
			<div class="ads-placment">{{COMMENT_AD}}</div>
			<?php if (($pt->config->sell_videos_system == 'on') || $pt->get_video->sell_video == 0 ) { ?>
				{{VIDEO_COMMENTS}}
			<?php }  ?>
		</div>
		<div class="col-md-1"></div>
	</div>
</div>

<div class="modal fade matdialog" id="donate_box" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog modal-sm" role="document">
		<div class="modal-content">
			<div class="modal-body">
				<h4 class="text-center">Donate Tokens</h4>
				<div class="share-video" style="display: flex;justify-content: space-between !important;">
					
					<span class="h5">Balance: 
						<img src="{{CONFIG theme_url}}/img/exenos.png" style="height:19px;width:19px;">
						<span id="token_balance">{{ME token_balance}}</span>
					</span>
					<span class="icon-color">
						<a href="{{LINK settings/token_deposit/<?php echo $pt->settings->username; ?>}}" data-load="?link1=settings&page=token_deposit&user=<?php echo $pt->settings->username; ?>" style="border-bottom: 1px dashed #ddd;font-size:14px;height: 20px;border-radius: 0px;">Deposit</a>
					</span>
				</div>
				
				<div class="yp_copy_link" style="margin:20px 80px 20px;">
					<button class="btn" style="background:purple;">
						<img src="{{CONFIG theme_url}}/img/exenos.png" style="height:19px;width:19px;margin-right:3px;">
					</button>
					<input id="token_amount" name="token_amount" tabindex="1" type="number" placeholder="Enter Amount" style="background-color:white;">
				</div>
				<div class="yp_copy_link">
					<input id="token_receiver_id" name="token_receiver_id" value="<?php echo $pt->get_video->user_id ?>" tabindex="1" type="hidden">
					<input id="token_video_id" name="token_video_id" value="{{ID}}" type="hidden">
					<input id="token_password" name="password" placeholder="Your Password" tabindex="1" type="password">
					<input type="hidden" id="token_url" name="token_url" value="{{LINK aj/user/token-transfer}}?hash=">
					<input type="hidden" id="token_hash_id" name="token_hash_id" value="<?php echo PT_CreateSession()?>">
       				<input type="hidden" id="token_user_id" name="token_user_id" value="{{USER id}}">
					<button class="btn" onclick="transferToken();">
						<i class="fa fa-chevron-circle-right" style="font-size:20px;"></i>
					</button>
				</div>
				<div id="token_message" class="text-danger text-center"></div>
			</div>
			<div class="modal-footer">
				<button type="button" class="matbtn btn btn-default" data-dismiss="modal">{{LANG close}}</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade matdialog" id="share_box" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog modal-sm" role="document">
		<div class="modal-content">
			<div class="modal-body">
				<ul class="nav nav-tabs vp_tabs" id="myTab" role="tablist">
					<li class="nav-item active">
						<a class="nav-link" id="share-tab" data-toggle="tab" href="#share" role="tab" aria-controls="share" aria-selected="true">{{LANG share}}</a>
					</li>
					<?php if ($pt->config->embed_system == 'on') {?>
					<?php if ($pt->get_video->sell_video == 0) { ?>
						<li class="nav-item">
							<a class="nav-link" id="embed-tab" data-toggle="tab" href="#embed" role="tab" aria-controls="embed" aria-selected="false">{{LANG embed}}</a>
						</li>
					<?php } ?>
					<?php } ?>
				</ul>
				<div class="tab-content">
					<div class="tab-pane fade active in" id="share" role="tabpanel" aria-labelledby="share-tab">
						<div class="yp_copy_link">
							<input id="copyLink" readonly="" tabindex="1" type="text" value="{{CONFIG site_url}}/v/<?php echo $pt->get_video->short_id; ?>">
							<button class="btn" onclick="copyLinkfn();"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg></button>
						</div>
						<div class="share-video">
							<div><a href="javascript:void(0);" class="fa fa-facebook" onclick="OpenShareWindow('https://www.facebook.com/sharer/sharer.php?u={{ENCODED_URL}}')"></a></div>
							<div><a href="javascript:void(0);" class="fa fa-twitter" onclick="OpenShareWindow('https://twitter.com/intent/tweet?url={{ENCODED_URL}}')"></a></div>
							<div><a href="javascript:void(0);" class="fa fa-linkedin" onclick="OpenShareWindow('https://www.linkedin.com/shareArticle?mini=true&url={{ENCODED_URL}}&title={{TITLE}}')"></a></div>
							<div><a href="javascript:void(0);" class="fa fa-pinterest" onclick="OpenShareWindow('https://pinterest.com/pin/create/button/?url={{ENCODED_URL}}&media={{THUMBNAIL}}')"></a></div>
							<div><a href="javascript:void(0);" class="fa fa-reddit" onclick="OpenShareWindow('http://www.reddit.com/submit?url={{ENCODED_URL}}')"></a></div>
							<?php if (!empty($pt->config->wowonder_domain_uri) && $pt->config->wowonder_img) {?> 
								<div><a href="javascript:void(0);" class="share-third" onclick="OpenShareWindow('{{CONFIG wowonder_domain_uri}}/sharer?url={{ENCODED_URL}}')"><img src="{{CONFIG wowonder_img}}" alt="share to "></a></div>
							<?php } ?>
						</div>
					</div>
					<?php if ($pt->config->embed_system == 'on') {?>
					<?php if ($pt->get_video->sell_video == 0) { ?>
						<div class="tab-pane fade" id="embed" role="tabpanel" aria-labelledby="embed-tab">
							<div class="embed-placement pp_mat_input vp_embed_vid_box">
								<textarea name="embed" id="embed" cols="30" rows="4" onclick="this.select()" class="form-control"><iframe src="{{LINK embed/{{VIDEO_MAIN_ID}}}}" frameborder="0" width="700" height="400" allowfullscreen></iframe></textarea>
							</div>
						</div>
					<?php } ?>
					<?php } ?>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="matbtn btn btn-default" data-dismiss="modal">{{LANG close}}</button>
			</div>
		</div>
	</div>
</div>

<?php 
if (($pt->config->payed_subscribers == 'on' && $pt->get_video->owner->subscriber_price > 0 && $pt->is_paid > 0) || ($pt->config->payed_subscribers == 'off') || ($pt->config->payed_subscribers == 'on' && $pt->get_video->owner->subscriber_price == 0) ) {
if ($pt->config->download_videos == 'on' && empty($pt->get_video->daily) && empty($pt->get_video->vimeo) && empty($pt->get_video->youtube) && $pt->get_video->converted == 1 && empty($pt->get_video->facebook) && $pt->get_video->age == false && $pt->video_approved == true) { ?>
<?php if ($pt->get_video->sell_video == 0) { ?>
<?php if ($pt->get_video->privacy != 1 || ($pt->get_video->privacy == 1 && $pt->get_video->is_owner)) { ?>
<div class="modal fade matdialog" id="download_box" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog modal-sm" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title" id="myModalLabel">{{LANG download}}</h4>
			</div>
			<div class="modal-body">
				<div class="download-placement">
					<?php if (!empty($pt->video_4096)) { ?>
						<a href="{{VIDEO_LOCATION_4096}}" download>4K</a>
					<?php } ?>
					<?php if (!empty($pt->video_2048)) { ?>
						<a href="{{VIDEO_LOCATION_2048}}" download>2K</a>
					<?php } ?>
					<?php if (!empty($pt->video_1080)) { ?>
						<a href="{{VIDEO_LOCATION_1080}}" download>1080p</a>
					<?php } ?>
					<?php if (!empty($pt->video_720)) { ?>
						<a href="{{VIDEO_LOCATION_720}}" download>720p</a>
					<?php } ?>
					<?php if (!empty($pt->video_480)) { ?>
						<a href="{{VIDEO_LOCATION_480}}" download>480p</a>
					<?php } ?>
					<?php if (!empty($pt->video_360)) { ?>
						<a href="{{VIDEO_LOCATION_360}}" download>360p</a>
					<?php } else if (!empty($pt->get_video->video_location)) { ?>
						<a href="{{VIDEO_LOCATION}}" download>{{LANG original}}</a>
					<?php } ?>
					<?php if (!empty($pt->video_240)) { ?>
						<a href="{{VIDEO_LOCATION_240}}" download>240p</a>
					<?php } ?>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="matbtn btn btn-default" data-dismiss="modal">{{LANG close}}</button>
			</div>
		</div>
	</div>
</div>
<?php } } } ?>
<?php } ?>

<?php if (IS_LOGGED): ?>
<?php if ($pt->get_video->is_owner == false) { ?>
	<div class="modal fade matdialog" id="report_box" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog modal-sm" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="myModalLabel">{{LANG report}}</h4>
				</div>
				<div class="modal-body">
					<?php if ($pt->reported === true): ?>
						<button class="btn vid_rprt_btn btn-report active" data-dismiss="modal" onclick="PT_ReportVideo('{{ID}}',this);" data-rep="0">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg> {{LANG cancel_report}}
						</button>
					<?php else: ?>
						<button class="btn vid_rprt_btn btn-report" data-dismiss="modal" onclick="PT_ReportVideo('{{ID}}',this);" data-rep="1">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M14.4,6L14,4H5V21H7V14H12.6L13,16H20V6H14.4Z" /></svg> {{LANG report_zs_video}}
						</button>
					<?php endif; ?>
					<?php if (IS_LOGGED && $pt->config->report_copyright == 'on') { ?>
						<button class="btn vid_rprt_btn btn-report" data-dismiss="modal" onclick="PT_ReportCopyVideo('{{ID}}',this);" data-rep="1">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M10.08,10.86C10.13,10.53 10.24,10.24 10.38,10C10.5,9.74 10.72,9.53 10.97,9.37C11.21,9.22 11.5,9.15 11.88,9.14C12.11,9.15 12.32,9.19 12.5,9.27C12.71,9.36 12.89,9.5 13.03,9.63C13.17,9.78 13.28,9.96 13.37,10.16C13.46,10.36 13.5,10.58 13.5,10.8H15.3C15.28,10.33 15.19,9.9 15,9.5C14.85,9.12 14.62,8.78 14.32,8.5C14,8.22 13.66,8 13.24,7.84C12.82,7.68 12.36,7.61 11.85,7.61C11.2,7.61 10.63,7.72 10.15,7.95C9.67,8.18 9.27,8.5 8.95,8.87C8.63,9.26 8.39,9.71 8.24,10.23C8.09,10.75 8,11.29 8,11.87V12.14C8,12.72 8.08,13.26 8.23,13.78C8.38,14.3 8.62,14.75 8.94,15.13C9.26,15.5 9.66,15.82 10.14,16.04C10.62,16.26 11.19,16.38 11.84,16.38C12.31,16.38 12.75,16.3 13.16,16.15C13.57,16 13.93,15.79 14.24,15.5C14.55,15.25 14.8,14.94 15,14.58C15.16,14.22 15.27,13.84 15.28,13.43H13.5C13.5,13.64 13.43,13.83 13.34,14C13.25,14.19 13.13,14.34 13,14.47C12.83,14.6 12.66,14.7 12.46,14.77C12.27,14.84 12.07,14.86 11.86,14.87C11.5,14.86 11.2,14.79 10.97,14.64C10.72,14.5 10.5,14.27 10.38,14C10.24,13.77 10.13,13.47 10.08,13.14C10.03,12.81 10,12.47 10,12.14V11.87C10,11.5 10.03,11.19 10.08,10.86M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20Z" /></svg> {{LANG report_copyright}}
						</button>
					<?php } ?>
				</div>
			</div>
		</div>
	</div>
<?php }  ?>
<?php endif; ?>

<?php echo PT_LoadPage('modals/stripe_modal'); ?>

<script type="text/javascript">
$(document).ready(function(){
	$('.cus_rel_vid_slide').slick({
		infinite: false,
		slidesToShow: 4,
		<?php if ($pt->language_type == 'rtl') { ?>rtl: true,<?php } ?>
		slidesToScroll: 2,
		responsive: [
			{
				breakpoint: 1360,
				settings: {
					slidesToShow: 3,
					slidesToScroll: 1,
				}
			},
			{
				breakpoint: 1251,
				settings: {
					slidesToShow: 4,
					slidesToScroll: 1,
				}
			},
			{
				breakpoint: 1127,
				settings: {
					slidesToShow: 3,
					slidesToScroll: 1,
				}
			},
			{
				breakpoint: 910,
				settings: {
					slidesToShow: 2,
					slidesToScroll: 1,
				}
			},
			{
				breakpoint: 530,
				settings: {
					arrows: false,
					slidesToShow: 2,
					slidesToScroll: 1,
					waitForAnimate: false,
				}
			},
		]
	});
});
	
	<?php if ($pt->config->credit_card == 'yes') { ?>
      var stripe_array = [];
      Stripe.setPublishableKey('{{CONFIG stripe_id}}');

      function SH_StripeCardRequest() {
         $('#stripe_btn').text("{{LANG please_wait}}");
         $('#stripe_btn').attr('disabled', 'true');
         if ($("#stripe_name").val() != '' && $("#stripe_email").val() != '' && $("#stripe_number").val() != '' && $("#stripe_month").val() != '' && $("#stripe_year").val() != '' && $("#stripe_cvc").val() != '') {

            stripe_array['stripe_name'] = $('#stripe_name').val();
            stripe_array['stripe_email'] = $('#stripe_email').val();
            stripe_array['stripe_number'] = $('#stripe_number').val();
            stripe_array['stripe_month'] = $('#stripe_month').val();
            stripe_array['stripe_year'] = $('#stripe_year').val();
            stripe_array['stripe_cvc'] = $('#stripe_cvc').val();
            Stripe.createToken({
                  number: $('#stripe_number').val(),
                  exp_month: $('#stripe_month').val(),
                  exp_year: $('#stripe_year').val(),
                  cvc: $('#stripe_cvc').val()
              }, SH_StripeCardResponseHandler);
         }
         else{
            $('#stripe_alert').html('<div class="alert alert-danger">{{LANG please_check_details}}</div>');
            $('#stripe_btn').text("{{LANG pay}}");
            $('#stripe_btn').removeAttr('disabled');
         }
      }
      function SH_StripeCardResponseHandler(status, response) {
          if (response.error) {
            $('#stripe_alert').html('<div class="alert alert-danger">'+response.error.message+'</div>');
            $('#stripe_btn').text("{{LANG pay}}");
            $('#stripe_btn').removeAttr('disabled');
          } else {
            stripe_array['token'] = response.id;

            if (stripe_array['user_id'] > 0) {

               $.post('{{LINK aj/go_pro/subscribe}}', {'stripe_name': stripe_array['stripe_name'],'stripe_email': stripe_array['stripe_email'],'stripe_number': stripe_array['stripe_number'],'stripe_month': stripe_array['stripe_month'],'stripe_year': stripe_array['stripe_year'],'stripe_cvc': stripe_array['stripe_cvc'],stripeToken:stripe_array['token'],user_id: stripe_array['user_id'],type:'stripe'}, function (data) {
                     if (data.status == 200) {
                        window.location.href = data.url;
                     } else {
                        $('#stripe_alert').html('<div class="alert alert-danger"><i class="fa fa-spin fa-spinner"></i> {{LANG payment_declined}}</div>');
                     }
               });

            }
            else{
               $.post('{{LINK aj/go_pro/stripe_pay_to_see}}', {'stripe_name': stripe_array['stripe_name'],'stripe_email': stripe_array['stripe_email'],'stripe_number': stripe_array['stripe_number'],'stripe_month': stripe_array['stripe_month'],'stripe_year': stripe_array['stripe_year'],'stripe_cvc': stripe_array['stripe_cvc'],stripeToken:stripe_array['token'],video_id: '{{ID}}'}, function (data) {
                  if (data.status == 200) {
                     window.location.href = data.url;
                  } else {
                     $('#stripe_alert').html('<div class="alert alert-danger"><i class="fa fa-spin fa-spinner"></i> {{LANG payment_declined}}</div>');
                  }
              });

            }
          }
      }

   <?php } ?>

	function PT_OpenStripe(pkg,self,video_id = 0,price = 0,user_id = 0){

      $('#pay-go-pro').modal('hide');
      $('#stripe_modal').modal('show');
      stripe_array['video_id'] = video_id;
      stripe_array['user_id'] = user_id;
    }

<?php if (!empty($pt->get_video->demo) && PT_GetMedia($pt->get_video->demo) == $pt->get_video->video_location) { ?>
	$("video").bind("ended", function() {
		var link_ = "'"+site_url+"/login'";
		<?php if ($pt->get_video->owner->subscriber_price) { ?>
            var type = "'subscribe'";
            var text = "<?php $text = str_replace('{{PRICE}}', $pt->currency.$pt->get_video->owner->subscriber_price, $lang_array['buy_or_subscribe']);
                           $text = str_replace('{{USERNAME}}',$pt->get_video->owner->name, $text);
                              echo($text); ?>";
            $('.video-player').prepend('<div class="video-processing pay_to_content"><div class="pay_to_content_background"></div><div style="background: rgba(0,0,0,0.8) !important;"><h5><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-dollar-sign"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg></p>'+text+'<br><br><?php if (!IS_LOGGED) { ?><button class="btn btn-main" onselectstart="return false" onclick="location.href = '+link_+';">{{LANG pay}} {{CURRENCY}}<?php echo $pt->get_video->sell_video; ?> </button><?php if ($pt->get_video->owner->subscriber_price) { ?><br><br><button class="btn btn-main" onselectstart="return false"onclick="location.href = '+link_+';">{{LANG subscribe}} {{CURRENCY}}<?php echo $pt->get_video->owner->subscriber_price; ?></button><?php } ?><?php } else{ ?><button class="btn btn-main p_t_show_btn_" onselectstart="return false" onclick="pay_to_see(<?php echo $pt->get_video->id; ?>,<?php echo $pt->get_video->sell_video; ?>)">{{LANG pay}} {{CURRENCY}}<?php echo $pt->get_video->sell_video; ?> </button><br><br><button class="btn btn-main" onselectstart="return false" onclick="PT_PaySubscribe(<?php echo $pt->get_video->user_id; ?>,this,'+type+')">{{LANG subscribe}} {{CURRENCY}}<?php echo $pt->get_video->owner->subscriber_price; ?> </button><?php } ?></h5></div></div>');

         <?php }else{ ?>
            $('.video-player').prepend('<div class="video-processing pay_to_content"><div class="pay_to_content_background"></div><div style="background: rgba(0,0,0,0.8) !important;"><h5><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-dollar-sign"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg></p>{{LANG pay_to_see_video}}<br><br><?php if (!IS_LOGGED) { ?><button class="btn btn-main" onselectstart="return false" onclick="location.href = '+link_+';">{{LANG pay}} {{CURRENCY}}<?php echo $pt->get_video->sell_video; ?> </button><?php } else{ ?><button class="btn btn-main p_t_show_btn_" onselectstart="return false" onclick="pay_to_see(<?php echo $pt->get_video->id; ?>,<?php echo $pt->get_video->sell_video; ?>)">{{LANG pay}} {{CURRENCY}}<?php echo $pt->get_video->sell_video; ?> </button><?php } ?></h5></div></div>');

         <?php } ?>
	});
<?php } ?>

var sources = [];
for (var i = 0 ; i < $('video').find('source').length; i++) {
	sources[i] = parseFloat($($('video').find('source')[i]).attr('res'));
}

// var imageAddr = "http://www.kenrockwell.com/contax/images/g2/examples/31120037-5mb.jpg"; 
// var downloadSize = 4995374;
var imageAddr = site_url+"/upload/photos/speed.jpg"; 
var downloadSize = 1082828;
function getQuality() {
	MeasureConnectionSpeed();

	function MeasureConnectionSpeed() {
		if (getCookie('internet_speed') > 0) {
	   		showResults(getCookie('internet_speed'));
	   	}
	   	else{
			var startTime, endTime;
			var download = new Image();
			download.onload = function () {
				endTime = (new Date()).getTime();
				showResults();
			}
			download.onerror = function (err, msg) {
				ShowProgressMessage(0);
			}
			startTime = (new Date()).getTime();
			var cacheBuster = "?nnn=" + startTime;
			download.src = imageAddr + cacheBuster;
	   	}
      	//console.log($.cookie("internet_speed"));
		function showResults(speed = 0) {
          	if (speed == 0) {
				var duration = (endTime - startTime) / 1000;
				var bitsLoaded = downloadSize * 8;
				var speedBps = (bitsLoaded / duration).toFixed(2);
				var speedKbps = (speedBps / 1024).toFixed(2);
				var speedMbps = (speedKbps / 1024).toFixed(2);
				setCookie("internet_speed", speedKbps,1);
          	}
          	else{
          		speedKbps = speed;
          		if (speed < 240) {
          			speedKbps = 250;
          		}
          	}
			for (var i = 0 ; i < sources.length; i++) {
               if (sources[i] < parseFloat(speedKbps)) {
					is_clicked = true;
					video_source = sources[i];
					<?php if ($pt->config->player_type == 'fluidPlayer' && empty($pt->get_video->youtube)) { ?>
						$('#source_my-video_{{ID}}_'+video_source+'p').click();
						$('.source_button_icon').removeClass('source_selected');
						$('#source_my-video_{{ID}}_auto').find('span').addClass('source_selected');
					<?php } elseif ($pt->config->player_type == 'videojs' && empty($pt->get_video->youtube)) { ?>
						$( ".vjs-menu-item-text:contains('"+video_source+"p')" ).click();
						$('.vjs-resolution-button-label').text('auto');
					<?php }else{ ?>
						$('#'+$('.mejs__container').attr('id')+'-qualities-'+video_source+'p').click();
						$('.mejs__qualities-button').find('button').text('auto');
						$('.mejs__qualities-selector-label').removeClass('mejs__qualities-selected');
						$('#quality__auto').addClass('mejs__qualities-selected');
					<?php } ?>
					break;
				}
			}
		}
	}
}

function setAuto(self) {
	<?php if ($pt->config->player_type == 'fluidPlayer' && empty($pt->get_video->youtube)) { ?>
		$('.source_button_icon').removeClass('source_selected');
		$('#source_my-video_{{ID}}_auto').find('span').addClass('source_selected');
	<?php } elseif ($pt->config->player_type == 'videojs' && empty($pt->get_video->youtube)) { ?>
		$('.vjs-resolution-button-label').text('auto');
	<?php }else{ ?>
		$('.mejs__qualities-button').find('button').text('auto');
		$('.mejs__qualities-selector-label').removeClass('mejs__qualities-selected');
		$('#quality__auto').addClass('mejs__qualities-selected');
	<?php } ?>
	getQuality();
	setTimeout(function (argument) {
		setCookie('auto', 'auto', 1);
	},1000);
}

$(document).ready(function(){
	document.querySelector('video').addEventListener("loadeddata", function(){
		setCookie('auto', '', 1);
	});
});

<?php if (!empty($_COOKIE['auto'])) { ?>
	setTimeout(function (argument) {
		setAuto('');
	},2000);
<?php } ?>
</script>

<?php if ($pt->config->player_type == 'videojs' && empty($pt->get_video->youtube)) { ?>
<script src="{{CONFIG theme_url}}/player/js/video_js/video.js"></script>
<script src="{{CONFIG theme_url}}/player/js/video_js/videojs-contrib-ads.min.js"></script>
<script src="{{CONFIG theme_url}}/player/js/video_js/videojs-resolution-switcher.js"></script>
<script src="{{CONFIG theme_url}}/player/js/video_js/videojs.ima.js"></script>
<?php } ?>

<?php if (empty($pt->get_video->facebook) && empty($pt->get_video->vimeo) && empty($pt->get_video->daily)) { ?>
<script type="text/javascript">
function go_to_duration(duration) {
   window.scrollTo(0, 0);
   var vid = document.querySelector("video");
   vid.currentTime = duration;
   vid.play();
}
</script>
<?php } ?>

<?php if (empty($pt->get_video->facebook) && empty($pt->get_video->vimeo) && empty($pt->get_video->daily) && ($pt->get_video->sell_video == 0 || $pt->get_video->is_owner || $pt->video_approved == false  || !empty($pt->get_video->demo) || ($pt->get_video->sell_video > 0 && $pt->is_paid > 0))) { ?>
<script type="text/javascript">
	<?php if ($pt->config->player_type == 'fluidPlayer' && empty($pt->get_video->youtube)) { ?>
		if ('{{VAST_URL}}' != '') {
			myFluidPlayer = fluidPlayer(
			'my-video_<?php echo $pt->get_video->id; ?>',
			{
				vastOptions: {
					adList: [ {roll : "preRoll",
					vastTag : "{{VAST_URL}}",
					vastTimeout: {{AD_SKIP_NUM}} * 1000 }],
					vastAdvanced: {
						vastLoadedCallback:       (function() {  }),
						noVastVideoCallback:      (function() {  }),
						vastVideoSkippedCallback: (function() { 
							setTimeout(function () {
								if ($('#autoplay').is(":checked")) {
									var media = document.querySelector("video");
									media.addEventListener('ended', function (e) {
										if ($('#autoplay').is(":checked")) {
											var url = $('#next-video').find('.pt_video_side_vids').find('a').attr('href');
											if (url) {
												window.location.href = url;
											}
										}
										else{
											/* pass */
										}
									}, false);
								}
							},2000);
						}),
						vastVideoEndedCallback:   (function() { 
							setTimeout(function () {
								if ($('#autoplay').is(":checked")) {
									var media = document.querySelector("video");
									media.addEventListener('ended', function (e) {
										if ($('#autoplay').is(":checked")) {
											var url = $('#next-video').find('.pt_video_side_vids').find('a').attr('href');
											if (url) {
												window.location.href = url;
											}
										}
										else{
											/* pass */
										}
									}, false);
								}
							},2000);
						})
					}
				},
				layoutControls: {
					playbackRateEnabled:    true,
					fillToContainer:true,
					autoPlay: true
				}
			}
			);
			myFluidPlayer.on('play', function(){ 
				// if (pt_elexists('.ads-overlay-info')) {
				//   $('.ads-overlay-info').remove();
				// }
				$('.ads-test').remove();
				if ($('body').attr('resized') == 'true') {
					PT_Resize(true);
				}
				$('.mejs__container').css('height', ($('.mejs__container').width() / 1.77176216) + 'px');
				$('video, iframe').css('height', '100%');
			});
		} else {
			<?php if (!empty($pt->ad_image)) { ?>
			myFluidPlayer = fluidPlayer('my-video_<?php echo $pt->get_video->id; ?>',{
				layoutControls: {
					playbackRateEnabled:    true,
					fillToContainer:true,
					autoPlay: false,
					playButtonShowing: true,
					playPauseAnimation: false
				}
			});
			if ($('#autoplay').is(":checked")) {
				var media = document.querySelector("video");
				media.addEventListener('ended', function (e) {
					if ($('#autoplay').is(":checked")) {
						var url = $('#next-video').find('.pt_video_side_vids').find('a').attr('href');
						if (url) {
							window.location.href = url;
						}
					}
					else{
						/* pass */
					}
				}, false);
			}
			<?php }else{ ?>
			myFluidPlayer = fluidPlayer('my-video_<?php echo $pt->get_video->id; ?>',{
				layoutControls: {
					playbackRateEnabled:    true,
					fillToContainer:true,
					autoPlay: true,
					playButtonShowing: true,
					playPauseAnimation: false
				}
			});
			if ($('#autoplay').is(":checked")) {
				var media = document.querySelector("video");
				media.addEventListener('ended', function (e) {
					if ($('#autoplay').is(":checked")) {
						var url = $('#next-video').find('.pt_video_side_vids').find('a').attr('href');
						if (url) {
							window.location.href = url;
						}
					}
					else{
						/* pass */
					}
				}, false);
			}
			<?php } ?>
		}
		if (sources.length > 1) {
			setTimeout(function () {
				$('#my-video_{{ID}}_fluid_control_video_source_list').append('<div id="source_my-video_{{ID}}_auto" class="fluid_video_source_list_item" onclick="setAuto(this)"><span class="source_button_icon"></span>auto</div>');
			},1000);
		}
	<?php } elseif ($pt->config->player_type == 'videojs' && empty($pt->get_video->youtube)) { ?>
		if ({{AD_MEDIA}} != '') {
			var ad_started = false;
			//var player = videojs("my-video", { "controls": true, "autoplay": 'play', "preload": "auto" });
			var player = videojs('my-video', {
				controls: true,
				plugins: {
					videoJsResolutionSwitcher: {
					default: 'low', // Default resolution [{Number}, 'low', 'high'],
					dynamicLabel: true
					}
				}
			}, function(){
				var player = this;
				window.player = player
				player.updateSrc([
					<?php if (!empty($pt->video_4096)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_4096}}', type: '{{VIDEO_TYPE}}', label: '4K', res: 4096
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_2048)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_2048}}', type: '{{VIDEO_TYPE}}', label: '2K', res: 2048
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_1080)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_1080}}', type: '{{VIDEO_TYPE}}', label: '1080p', res: 1080
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_720)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_720}}', type: '{{VIDEO_TYPE}}', label: '720p', res: 720
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_480)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_480}}', type: '{{VIDEO_TYPE}}', label: '480p', res: 480
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_360)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_360}}', type: '{{VIDEO_TYPE}}', label: '360p', res: 360
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_240)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_240}}', type: '{{VIDEO_TYPE}}', label: '240p', res: 240
	            },
	            <?php } ?>
	            <?php if (!empty($pt->get_video->youtube) || (!empty($pt->get_video->video_location) && empty($pt->video_360))) { ?>
	            {
	              src: '{{VIDEO_LOCATION}}', type: '{{VIDEO_TYPE}}', label: <?php echo(!empty($pt->video_quality) ? '"'.$pt->video_quality.'"' : '"360p"') ?>, res: <?php echo(!empty($pt->video_res) ? $pt->video_res : 360) ?>
	            },
	            <?php } ?>
	          ])
	          
	        });

			player.ads(); // initialize videojs-contrib-ads

			// request ads whenever there's new video content
			player.on('contentchanged', function() {
				// in a real plugin, you might fetch your ad inventory here
				player.trigger('adsready');
			});
			player.on('readyforpreroll', function() {
				if (ad_started == false) {
					player.ads.startLinearAdMode();
					// play your linear ad content
					// in this example, we use a static mp4
					player.src({{AD_MEDIA}});
					ad_started = true;
					$('.vjs-resolution-button').hide();
				}
				// send event when ad is playing to remove loading spinner
				player.one('adplaying', function() {
					if (pt_elexists('.ads-overlay-info')) {
						$('.ads-overlay-info').remove();
					}
					$('.ads-test').remove();
					if ($('body').attr('resized') == 'true') {
						PT_Resize(true);
					}
					$('.mejs__container').css('height', ($('.mejs__container').width() / 1.77176216) + 'px');
					$('video, iframe').css('height', '100%');
					player.trigger('ads-ad-started');
					num = {{AD_SKIP_NUM}};
					$('.video-player').append('<span class="video_js_skip_ad">Skip in '+num+'</span>');
					setInterval(function () {
						num = num -1;
						if (num == 0 || num < 0) {
							$('.video_js_skip_ad').html('<a href="javascript:void(0)" onclick="end_video_js_ad()">Skip Ad</a>');
							//$('.video-player').attr('onclick', '');
						}
						if (num > 0) {
							$('.video-player').attr('onclick', 'window.open("'+{{AD_LINK}}+'");');
							$('.video_js_skip_ad').text('Skip in '+(num));
						}
					},1000);
				});

				// resume content when all your linear ads have finished
				player.one('adended', function() {
					player.ads.endLinearAdMode();
					$('.video_js_skip_ad').remove();
					$('.video-player').attr('onclick', '');
					setTimeout(function () {
					if ($('#autoplay').is(":checked")) {
						var media = document.querySelector("video");
						media.addEventListener('ended', function (e) {
							if ($('#autoplay').is(":checked")) {
								var url = $('#next-video').find('.pt_video_side_vids').find('a').attr('href');
								if (url) {
									window.location.href = url;
								}
							}
							else{
								/* pass */
							}
						}, false);
					}
					},2000);
					$('.vjs-resolution-button').show();
				});
			});

			player.trigger('adsready');
			function end_video_js_ad() {
				player.ads.endLinearAdMode();
				$('.video_js_skip_ad').remove();
				$('.video-player').attr('onclick', '');
				setTimeout(function () {
				if ($('#autoplay').is(":checked")) {
					var media = document.querySelector("video");
					media.addEventListener('ended', function (e) {
						if ($('#autoplay').is(":checked")) {
							var url = $('#next-video').find('.pt_video_side_vids').find('a').attr('href');
							if (url) {
								window.location.href = url;
							}
						}
			            else{
			              /* pass */
			            }
	                }, false);
	            }
				},2000);
				$('.vjs-resolution-button').show();
			}
		}else{
			<?php if (!empty($pt->ad_image)) { ?>
			//videojs("my-video", { "controls": true, "autoplay": false, "preload": "auto" });
			videojs('my-video', {
				controls: true,
				plugins: {
					videoJsResolutionSwitcher: {
					default: 'low', // Default resolution [{Number}, 'low', 'high'],
					dynamicLabel: true
					}
				}
			}, function(){
				var player = this;
				window.player = player
				player.updateSrc([
	             <?php if (!empty($pt->video_4096)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_4096}}', type: '{{VIDEO_TYPE}}', label: '4K', res: 4096
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_2048)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_2048}}', type: '{{VIDEO_TYPE}}', label: '2K', res: 2048
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_1080)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_1080}}', type: '{{VIDEO_TYPE}}', label: '1080p', res: 1080
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_720)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_720}}', type: '{{VIDEO_TYPE}}', label: '720p', res: 720
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_480)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_480}}', type: '{{VIDEO_TYPE}}', label: '480p', res: 480
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_360)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_360}}', type: '{{VIDEO_TYPE}}', label: '360p', res: 360
	            },
	            <?php } ?>
	            <?php if (!empty($pt->video_240)) { ?>
	            {
	              src: '{{VIDEO_LOCATION_240}}', type: '{{VIDEO_TYPE}}', label: '240p', res: 240
	            },
	            <?php } ?>
	            <?php if (!empty($pt->get_video->youtube) || (!empty($pt->get_video->video_location) && empty($pt->video_360))) { ?>
	            {
	              src: '{{VIDEO_LOCATION}}', type: '{{VIDEO_TYPE}}', label: <?php echo(!empty($pt->video_quality) ? '"'.$pt->video_quality.'"' : '"360p"') ?>, res: <?php echo(!empty($pt->video_res) ? $pt->video_res : 360) ?>
	            },
	            <?php } ?>
	          ])
	        });
			if ($('#autoplay').is(":checked")) {
				var media = document.querySelector("video");
				media.addEventListener('ended', function (e) {
					if ($('#autoplay').is(":checked")) {
						var url = $('#next-video').find('.pt_video_side_vids').find('a').attr('href');
						if (url) {
							window.location.href = url;
						}
		            }
		            else{
		              /* pass */
		            }
                }, false);
            }
			<?php }else{ ?>
			//videojs("my-video", { "controls": true, "autoplay": 'play', "preload": "auto" });
            videojs('my-video', {
		        controls: true,
		        plugins: {
		            videoJsResolutionSwitcher: {
						default: 'low', // Default resolution [{Number}, 'low', 'high'],
						dynamicLabel: true
		            }
		        }
		    }, function(){
		        var player = this;
		        window.player = player
		        player.updateSrc([
		             <?php if (!empty($pt->video_4096)) { ?>
		            {
		              src: '{{VIDEO_LOCATION_4096}}', type: '{{VIDEO_TYPE}}', label: '4K', res: 4096
		            },
		            <?php } ?>
		            <?php if (!empty($pt->video_2048)) { ?>
		            {
		              src: '{{VIDEO_LOCATION_2048}}', type: '{{VIDEO_TYPE}}', label: '2K', res: 2048
		            },
		            <?php } ?>
		            <?php if (!empty($pt->video_1080)) { ?>
		            {
		              src: '{{VIDEO_LOCATION_1080}}', type: '{{VIDEO_TYPE}}', label: '1080p', res: 1080
		            },
		            <?php } ?>
		            <?php if (!empty($pt->video_720)) { ?>
		            {
		              src: '{{VIDEO_LOCATION_720}}', type: '{{VIDEO_TYPE}}', label: '720p', res: 720
		            },
		            <?php } ?>
		            <?php if (!empty($pt->video_480)) { ?>
		            {
		              src: '{{VIDEO_LOCATION_480}}', type: '{{VIDEO_TYPE}}', label: '480p', res: 480
		            },
		            <?php } ?>
		            <?php if (!empty($pt->video_360)) { ?>
		            {
		              src: '{{VIDEO_LOCATION_360}}', type: '{{VIDEO_TYPE}}', label: '360p', res: 360
		            },
		            <?php } ?>
		            <?php if (!empty($pt->video_240)) { ?>
		            {
		              src: '{{VIDEO_LOCATION_240}}', type: '{{VIDEO_TYPE}}', label: '240p', res: 240
		            },
		            <?php } ?>
		            <?php if (!empty($pt->get_video->youtube) || (!empty($pt->get_video->video_location) && empty($pt->video_360))) { ?>
		            {
		              src: '{{VIDEO_LOCATION}}', type: '{{VIDEO_TYPE}}', label: <?php echo(!empty($pt->video_quality) ? '"'.$pt->video_quality.'"' : '"360p"') ?>, res: <?php echo(!empty($pt->video_res) ? $pt->video_res : 360) ?>
		            },
		            <?php } ?>
		        ]);
		        if ('{{VAST_URL}}' != '') {
					var options = {
						id: 'my-video',
						adTagUrl: "{{VAST_URL}}",
                        vastLoadTimeout:{{AD_SKIP_NUM}} * 1000
                    };

                    player.ima(options);

                    // Remove controls from the player on iPad to stop native controls from stealing
                    // our click
                    var contentPlayer =  document.getElementById('my-video_html5_api');
                    if ((navigator.userAgent.match(/iPad/i) ||
                        navigator.userAgent.match(/Android/i)) &&
                        contentPlayer.hasAttribute('controls')) {
						contentPlayer.removeAttribute('controls');
                    }

                    // Initialize the ad container when the video player is clicked, but only the
                    // first time it's clicked.
                    var initAdDisplayContainer = function() {
                       player.ima.initializeAdDisplayContainer();
                       wrapperDiv.removeEventListener(startEvent, initAdDisplayContainer);
                    }

                    var startEvent = 'click';
                    if (navigator.userAgent.match(/iPhone/i) ||
                        navigator.userAgent.match(/iPad/i) ||
                        navigator.userAgent.match(/Android/i)) {
						startEvent = 'touchend';
                    }

                    var wrapperDiv = document.getElementById('my-video');
                    wrapperDiv.addEventListener(startEvent, initAdDisplayContainer);
                }
		    });
            if ($('#autoplay').is(":checked")) {
				var media = document.querySelector("video");
				media.addEventListener('ended', function (e) {
					if ($('#autoplay').is(":checked")) {
						var url = $('#next-video').find('.pt_video_side_vids').find('a').attr('href');
						if (url) {
							window.location.href = url;
						}
		            }
		            else{
		              /* pass */
		            }
                }, false);
            }
			<?php } ?>
		}
		if (sources.length > 1) {
			setTimeout(function () {
				$('.vjs-menu-content').append('<li class="vjs-menu-item" tabindex="-1" role="menuitem" aria-disabled="false" onclick="setAuto(this)"><span class="vjs-menu-item-text">auto</span><span class="vjs-control-text" aria-live="polite"></span></li>');
			},1000);
		}
	<?php }else{ ?>
		$('video').mediaelementplayer({
			pluginPath: 'https://cdnjs.com/libraries/mediaelement-plugins/',
			shimScriptAccess: 'always',
			autoplay: true,
			hideVideoControlsOnLoad: true,
			startVolume: 1,
			features: ['playpause', 'current', 'progress', 'duration', 'speed', 'skipback', 'jumpforward', 'tracks', 'markers', 'volume', 'chromecast', 'contextmenu', 'flash' <?php echo ($pt->config->ffmpeg_system == 'on' && empty($pt->get_video->youtube)) ? ", 'quality'" : ''?> {{ADS}} {{VAT}}, 'fullscreen'],
			vastAdTagUrl: '{{VAST_URL}}',
			vastAdsType: '{{VAST_TYPE}}',
			jumpForwardInterval: 10,
			adsPrerollMediaUrl: [{{AD_MEDIA}}],
			adsPrerollAdUrl: [{{AD_LINK}}],
			adsPrerollAdEnableSkip: {{AD_SKIP}},
			adsPrerollAdSkipSeconds: {{AD_SKIP_NUM}},
			contextMenuItems: [{ isSeparator: true }],
			success: function (media) {
				media.addEventListener('ended', function (e) {
					if ($('#autoplay').is(":checked")) {
						var url = $('#next-video').find('.pt_video_side_vids').find('a').attr('href');
						if (url) {
							window.location.href = url;
						}
					}
					else{
					/* pass */
					}
				}, false);
				media.addEventListener('playing', function (e) {
					if (pt_elexists('.ads-overlay-info')) {
						$('.ads-overlay-info').remove();
					}
					$('.ads-test').remove();
					if ($('body').attr('resized') == 'true') {
						PT_Resize(true);
					}
					$('video, iframe').css('height', '100%');
				}); 
				<?php if (!empty($pt->get_video->youtube)) { ?>
				//    $(document).on('click', '.mejs__container', function(event) {
				//    $('.mejs__layer').css('display', 'flex');
				//    $('.mejs__overlay-play').css('display', 'none');
				//    media.play();
				// });
				<?php } ?>
			},
		});
	 if (sources.length > 1) {
      setTimeout(function () {
         $('.mejs__qualities-selector-list').append('<li class="mejs__qualities-selector-list-item" onclick="setAuto(this)"><input class="mejs__qualities-selector-input" type="radio" name="mep_0_qualities" value="auto" id="mep_0-qualities-auto"><label for="mep_0-qualities-auto" class="mejs__qualities-selector-label" id="quality__auto">auto</label></li>');
      },1000);
   }
<?php } ?>
</script>
<?php } ?>

<?php if (!empty($pt->get_video->facebook)) { ?>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v3.1&appId={{CONFIG facebook_app_ID}}&autoLogAppEvents=1';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<?php } ?>

<script>
function copyLinkfn() {
	var copyText = document.getElementById("copyLink");
	copyText.select();
	document.execCommand("copy");
};

<?php if ($pt->converted !== true): ?>
setInterval(function () {
	$.get('{{LINK aj/check-video-status}}', {id: $('#video-id').val()}, function(data) {
		if (data.status == 200) {
		location.reload();
		}
	});
}, 5000);
<?php endif; ?>

jQuery(window).ready(function($) {
    var width = $('.video-player').width().toString();
    var width = width.substring(0, width.lastIndexOf("."))
    $('.fb-video').attr('data-width', width);
    //$( 'iframe' ).attr( 'src', function ( i, val ) { return val; });
    $("#load-related-videos").click(function(event) {
		let id = 0;
		if ($("div[data-sidebar-video]").length > 0) {
			id = $("div[data-sidebar-video]").last().attr('data-sidebar-video');
		}

		$("#load-related-videos").find('i.spin').removeClass('hidden');

		$.ajax({
			url: '{{LINK aj/load-related-videos}}',
			type: 'GET',
			dataType: 'json',
			data: {id: id,video_id:'{{ID}}'},
		})
		.done(function(data) {
			if (data.status == 200) {
				$(".related-videos").append(data.html);
			}
			else{
				$("#load-related-videos").find('span').text('{{LANG no_more_videos}}');
			}
			$("#load-related-videos").find('i.spin').addClass('hidden');
		});
    });
});

$('.ad-link').on('click', function(event) {
	$('.ad-link').remove();
	$('video')[0].play();
});

<?php if (!empty($pt->ad_image)) { ?>
var counter = {{AD_SKIP_NUM}};
var interval = setInterval(function() {
    counter--;
    $('.timer span').text(counter);
    if (counter == 0) {
        $('.ad-link').remove();
        $('video')[0].play();
        clearInterval(interval);
    }
}, 1000);
<?php } ?>

$('.autoplay-video').on('change', function(event) {
	event.preventDefault();
	checked = 1;
	if($(this).is(":checked")) {
		checked = 2;
	}
	$.post('{{LINK aj/set-cookies}}', {name: 'autoplay', value: checked});
});

$('.ads-test').on('click', function(event) {
	$(this).remove();
});

$(function () {
    $('.rad-transaction').click(function(event) {
		$(this).off("click").removeClass('rad-transaction');
		$.get('{{LINK aj/ads/rad-transaction}}', function(data){ /* pass */ });
    });

    if ($('[data-litsitem-id]').length > 4) {
		var listItemtopPos = $("div[data-litsitem-id=<?php echo $pt->get_id; ?>]").offset();
		$('.play-list-cont').scrollTop((listItemtopPos.top - 170));
    }
    
	$('.desc').on('click', function(event) {
		event.preventDefault();
		if ($(this).hasClass('expended')) {
			$('.watch-video-description').css({'max-height': '270px', 'overflow': 'hidden'});
			$(this).removeClass('expended');
			$(this).text("{{LANG show_more}}");
		} else {
			$('.watch-video-description').css({'max-height': '4000px', 'height': 'auto', 'overflow': 'auto'});
			$(this).addClass('expended');
			$(this).text("{{LANG show_less}}");
		}
	});
   
	<?php if (!empty($pt->get_video->youtube)) { ?>
	setTimeout(function () {
		$('iframe').css({ width: '100%', height: '100%'});
	}, 2000);
	<?php } ?>

    $('.expend-player').on('click', function(event) {
		event.preventDefault();
		var resize = 0;
		if ($('.player-video').hasClass('resize_done')) {
			resize = 0;
		} else {
			resize = 1;
		}
		$.post('{{LINK aj/set-cookies}}', {name: 'resize', value:resize});
		PT_Resize();
	});
	<?php if (!empty($_SESSION['resize']) && $pt->config->resize_video == 'on' && (empty($pt->get_video->daily) && empty($pt->get_video->vimeo))) { ?>
		PT_Resize(true);
    <?php } ?>
	$(window).resize(function(event) {
		if ($('body').attr('resized') == 'true') {
			PT_Resize(true);
		}
	});
});

function PT_Resize(type) {
	if ($('.player-video').hasClass('resize_done') && type != true) {
		$('body').attr('resized', 'false');
		$('.vid_reszz_row').removeClass('resize_row_done');
		$('.player-video').removeClass('resize_done');
		$('.mejs__container, video, iframe').css('width', '100%');
		$('video, iframe').css('height', '100%');
		$('header').removeClass('strt_hdr_dark');
		$('.logo-img').find('img').attr('src', '{{CONFIG theme_url}}/img/logo.png');
		$('.yp_side_drawer').removeClass('hide_side_menu');
		$('.yp_side_menu').addClass('has_side_menu');
	} else {
		$('body').attr('resized', 'true');
		$('.vid_reszz_row').addClass('resize_row_done');
		$('.player-video').addClass('resize_done');
		$('.mejs__container, video, iframe').css('width', '100%');
		$('video, iframe').css('height', '100%');
		$('header').addClass('strt_hdr_dark');
		$('.logo-img').find('img').attr('src', '{{CONFIG theme_url}}/img/logo-light.png');
		$('.yp_side_drawer').addClass('hide_side_menu');
		$('.yp_side_menu').removeClass('has_side_menu');
	}
};

function growTextarea (i,elem) {
	var elem = $(elem);
	var resizeTextarea = function( elem ) {
    	var scrollLeft = window.pageXOffset || (document.documentElement || document.body.parentNode || document.body).scrollLeft;
    	var scrollTop  = window.pageYOffset || (document.documentElement || document.body.parentNode || document.body).scrollTop;  
    	elem.css('height', 'auto').css('height', elem.prop('scrollHeight') );
      	window.scrollTo(scrollLeft, scrollTop);
  	};
  	elem.on('input', function() {
    	resizeTextarea( $(this) );
  	});
  	resizeTextarea( $(elem) );
}

$('.jTextarea').each(growTextarea);
</script>

<?php 
if (empty($_SESSION['finger'])) {
?>
<script>
	var fingerprintReport = function () {
		Fingerprint2.get(function(components) {
			var murmur = Fingerprint2.x64hash128(components.map(function (pair) { return pair.value }).join(), 31)
			$.post('{{LINK aj/views}}?hash=' + $('.main_session').val()+'&type_=set', {finger: murmur}, function(data, textStatus, xhr) {
				<?php
				if ($pt->continent_hide == false) {
				if (($pt->video_approved == true  && (($pt->get_video->sell_video > 0 && $pt->is_paid > 0) || $pt->get_video->sell_video == 0) && ($pt->get_video->age == false) && $pt->video_type == 'public') || $pt->get_video->is_owner || PT_IsAdmin()) { 
					if ($pt->converted == true) {
				?>
					$.post('{{LINK aj/views}}?hash=' + $('.main_session').val()+'&type_=add', {video_id:{{ID}}}, function(data, textStatus, xhr) {
						if (data.status == 200) {
							$('#video-views-count').html(data.count);
						}
					});
				<?php } } } ?>
			});
		})
   }
   fingerprintReport();
</script>
<?php }else{ ?>
<?php
if ($pt->continent_hide == false) {
 if (($pt->video_approved == true  && (($pt->get_video->sell_video > 0 && $pt->is_paid > 0) || $pt->get_video->sell_video == 0) && ($pt->get_video->age == false) && $pt->video_type == 'public') || $pt->get_video->is_owner || PT_IsAdmin()) { 
   if ($pt->converted == true) {
   ?>
<script>
	$.post('{{LINK aj/views}}?hash=' + $('.main_session').val()+'&type_=add', {video_id:{{ID}}}, function(data, textStatus, xhr) {
		if (data.status == 200) {
			$('#video-views-count').html(data.count);
		}
	});
</script>
<?php } } } ?>
<?php } ?>


<div class="modal fade matdialog" id="2checkout_modal" role="dialog" data-keyboard="false" style="overflow-y: auto;">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></span></button>
            <h4 class="modal-title">{{LANG checkout_text}}</h4>
         </div>
         <form class="form form-horizontal" method="post" id="2checkout_form" action="#">
            <div class="modal-body twocheckout_modal">
               <div id="2checkout_alert"></div>
               <div class="clear"></div>
               <div class="sun_input col-md-6">
						<input id="card_name" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG name}}" value="<?php echo($pt->user->name) ?>">
					</div>
					<div class="sun_input col-md-6">
						<input id="card_address" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG address}}" value="<?php echo($pt->user->address) ?>">
					</div>
					<div class="sun_input col-md-6">
						<input id="card_city" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG city}}" value="<?php echo($pt->user->city) ?>">
					</div>
					<div class="sun_input col-md-6">
						<input id="card_state" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG state}}" value="<?php echo($pt->user->state) ?>">
					</div>
					<div class="sun_input col-md-6">
						<input id="card_zip" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG zip}}" value="<?php echo($pt->user->zip) ?>">
					</div>
			        <div class="sun_input col-md-6">
			             <select id="card_country" name="card_country" class="form-control">{{COUNTRIES}}</select>
			        </div>
					<div class="sun_input col-md-6">
						<input id="card_email" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG email}}" value="<?php echo($pt->user->email) ?>">
					</div>
					<div class="sun_input col-md-6">
						<input id="card_phone" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG phone_number}}" value="<?php echo($pt->user->phone_number) ?>">
					</div>
					<div class="clear"></div>
					<hr>
					<div class="row two_check_card">
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M20,8H4V6H20M20,18H4V12H20M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z" /></svg>
						<div class="sun_input col-xs-12">
							<input id="_number_" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG card_number}}">
							<input id="card_number" name="card_number" type="hidden" class="form-control input-md" autocomplete="off">
						</div>
						<div class="sun_input col-xs-4">
							<select id="card_month" name="card_month" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG month}} (01)">
								<option value="01">01</option>
								<option value="02">02</option>
								<option value="03">03</option>
								<option value="04">04</option>
								<option value="05">05</option>
								<option value="06">06</option>
								<option value="07">07</option>
								<option value="08">08</option>
								<option value="09">09</option>
								<option value="10">10</option>
								<option value="11">11</option>
								<option value="12">12</option>
							</select>
						</div>
						<div class="sun_input col-xs-4 no-padding-both">
							<select id="card_year" name="card_year" type="text" class="form-control input-md" autocomplete="off" placeholder="{{LANG year}} (2019)">
				                <?php for ($i=date('Y'); $i <= date('Y')+15; $i++) {  ?>
									<option value="<?php echo($i) ?>"><?php echo($i) ?></option>
								<?php } ?>
				            </select>
						</div>
						<div class="sun_input col-xs-4">
							<input id="card_cvc" name="card_cvc" type="text" class="form-control input-md" autocomplete="off" placeholder="CVC" maxlength="3" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
						</div>
					</div>
               <div class="clear"></div>
               <input type="text" id="2checkout_type" class="hidden" name="type">
               <input id="card_token" name="token" type="hidden" value="">
               <input id="checkout_video_{{ID}}" name="video_id" type="hidden" value="">
               <input id="checkout_price_{{ID}}" name="price" type="hidden" value="">
               <input id="checkout_user_id" name="user_id" type="hidden" value="">
            </div>
            <div class="clear"></div>
            <div class="modal-footer">
               <div class="ball-pulse"><div></div><div></div><div></div></div>
               <button type="button" class="btn btn-main" onclick="tokenRequest()" id="2checkout_btn">{{LANG pay}}</button>
            </div>
         </form>
      </div>
   </div>
</div>
<script type="text/javascript">
<?php if ($pt->config->checkout_payment == 'yes') { ?>
   // Called when token created successfully.
   var successCallback = function(data) {
       var myForm = document.getElementById('2checkout_form');
       if ($("#checkout_user_id").val() > 0) {
         $.post('{{LINK aj/go_pro/subscribe}}', {card_number: $("#card_number").val(),card_cvc: $("#card_cvc").val(),card_month: $("#card_month").val(),card_year: $("#card_year").val(),card_name: $("#card_name").val(),card_address: $("#card_address").val(),card_city: $("#card_city").val(),card_state: $("#card_state").val(),card_zip: $("#card_zip").val(),card_country: $("#card_country").val(),card_email: $("#card_email").val(),card_phone: $("#card_phone").val(),type: 'checkout',token: data.response.token.token,user_id: $("#checkout_user_id").val()}, function(data, textStatus, xhr) {
            $('#2checkout_btn').html("{{LANG pay}}");
            $('#2checkout_btn').attr('disabled');
            $('#2checkout_btn').removeAttr('disabled');
            $('#2checkout_form').find('.ball-pulse').fadeOut(100);
            if (data.status == 200) {
                  window.location.href = data.url;
               } else {
                  $('#2checkout_alert').html("<div class='alert alert-danger'>"+data.error+"</div>");
               setTimeout(function () {
                  $('#2checkout_alert').html("");
               },3000);
               }
            /*optional stuff to do after success */
          });

       }
       else{
         $.post('{{LINK aj/go_pro/checkout_pay_to_see}}', {card_number: $("#card_number").val(),card_cvc: $("#card_cvc").val(),card_month: $("#card_month").val(),card_year: $("#card_year").val(),card_name: $("#card_name").val(),card_address: $("#card_address").val(),card_city: $("#card_city").val(),card_state: $("#card_state").val(),card_zip: $("#card_zip").val(),card_country: $("#card_country").val(),card_email: $("#card_email").val(),card_phone: $("#card_phone").val(),type: 'wallet',token: data.response.token.token,price: $("#checkout_price_{{ID}}").val(),video_id: $("#checkout_video_{{ID}}").val()}, function(data, textStatus, xhr) {
            $('#2checkout_btn').html("{{LANG pay}}");
            $('#2checkout_btn').attr('disabled');
            $('#2checkout_btn').removeAttr('disabled');
            $('#2checkout_form').find('.ball-pulse').fadeOut(100);
            if (data.status == 200) {
                  window.location.href = data.url;
               } else {
                  $('#2checkout_alert').html("<div class='alert alert-danger'>"+data.error+"</div>");
               setTimeout(function () {
                  $('#2checkout_alert').html("");
               },3000);
               }
            /*optional stuff to do after success */
          });
       }
       
   };

   // Called when token creation fails.
   var errorCallback = function(data) {
      $('#2checkout_btn').html("{{LANG pay}}");
      $('#2checkout_btn').removeAttr('disabled');
      $('#2checkout_form').find('.ball-pulse').fadeOut(100);
       if (data.errorCode === 200) {
           tokenRequest();
       } else {
         $('#2checkout_alert').html("<div class='alert alert-danger'>"+data.errorMsg+"</div>");
         setTimeout(function () {
            $('#2checkout_alert').html("");
         },3000);
       }
   };

   var tokenRequest = function() {
      $('#card_number').val($('#_number_').val());
      $('#2checkout_btn').html("{{LANG please_wait}}");
      $('#2checkout_btn').attr('disabled','true');
      if ($("#card_number").val() != '' && $("#card_cvc").val() != '' && $("#card_month").val() != '' && $("#card_year").val() != '' && $("#card_name").val() != '' && $("#card_address").val() != '' && $("#card_city").val() != '' && $("#card_state").val() != '' && $("#card_zip").val() != '' && $("#card_country").val() != 0 && $("#card_email").val() != '' && $("#card_phone").val() != '') {
         $('#2checkout_form').find('.ball-pulse').fadeIn(100);
         // Setup token request arguments
          var args = {
              sellerId: "<?php echo($pt->config->checkout_seller_id) ?>",
              publishableKey: "<?php echo($pt->config->checkout_publishable_key) ?>",
              ccNo: $("#card_number").val(),
              cvv: $("#card_cvc").val(),
              expMonth: $("#card_month").val(),
              expYear: $("#card_year").val()
          };

          // Make the token request
          TCO.requestToken(successCallback, errorCallback, args);
      }
      else{
         $('#2checkout_btn').html("{{LANG pay}}");
         $('#2checkout_btn').removeAttr('disabled');
         $('#2checkout_alert').html("<div class='alert alert-danger'>{{LANG please_check_details}}</div>");
         setTimeout(function () {
            $('#2checkout_alert').html("");
         },3000);

      }
      
       
   };

   $(function() {
       // Pull in the public encryption key for our environment
       TCO.loadPubKey("<?php echo($pt->config->checkout_mode) ?>");
   });
<?php } ?>
    
   $(document).on('change', '#thumbnail', function(event) {
      let imgPath = $(this)[0].files[0].name;
       if (typeof(FileReader) != "undefined") {
           let reader = new FileReader();
           reader.onload = function(e) {
            $('#receipt_img_preview').attr('src', e.target.result);
           }
           reader.readAsDataURL(this.files[0]);
       }
      $('#bank_transfer_modal').addClass('up_rec_img_ready');
   });

   $(document).on('change', '#thumbnail_2', function(event) {
      let imgPath = $(this)[0].files[0].name;
       if (typeof(FileReader) != "undefined") {
           let reader = new FileReader();
           reader.onload = function(e) {
            $('.bank_image_2').attr('src', e.target.result);
           }
           reader.readAsDataURL(this.files[0]);
       }
      $('#bank_transfer_modal_2').addClass('up_rec_img_ready');
   });

   jQuery(document).ready(function($) {
      $('#bank_transfer_form').ajaxForm({
        url: '{{LINK aj/go_pro/bank_pay_to_see}}',
        beforeSend: function() {
          $('#bank_transfer_form').find('.ball-pulse').fadeIn(100);
        },
        success: function(data) {
          if (data['status'] == 200) {
            $("#blog-alert").html('<div class="alert alert-success">'+ data['message'] +'</div>');
            setTimeout(function () {
               window.location = "<?php echo $pt->config->site_url;?>";
               $(".prv-img").html('<div class="thumbnail-rendderer"><div><div class="error-text-renderer"></div><div><p>{{LINK browse_to_upload}}</p></div></div> </div>');
               $("#blog-alert").html('');
               $('#configreset').click();

            },3000)
          } else if (data['message']) {
            $("#blog-alert").html('<div class="alert alert-danger">' + data['message'] + '</div>');
          } 
          $('#bank_transfer_form').find('.ball-pulse').fadeOut(100);
      }});

      $('#bank_transfer_form_2').ajaxForm({
        url: '{{LINK aj/go_pro/subscribe}}',
        beforeSend: function() {
          $('#bank_transfer_form_2').find('.ball-pulse').fadeIn(100);
        },
        success: function(data) {
          if (data['status'] == 200) {
            $("#blog-alert-2").html('<div class="alert alert-success">'+ data['message'] +'</div>');
            setTimeout(function () {
               window.location = "<?php echo $pt->config->site_url;?>";
               $(".prv-img").html('<div class="thumbnail-rendderer"><div><div class="error-text-renderer"></div><div><p>{{LINK browse_to_upload}}</p></div></div> </div>');
               $("#blog-alert-2").html('');
               $('#configreset_2').click();

            },3000)
          } else if (data['message']) {
            $("#blog-alert-2").html('<div class="alert alert-danger">' + data['message'] + '</div>');
          } 
          $('#bank_transfer_form_2').find('.ball-pulse').fadeOut(100);
      }});



   });

    function PT_OpenBank(pkg,self,video_id = 0,price = 0,user_id){
       if (!pkg || !self) {
         return false;
       }
        $(self).text("{{LANG please_wait}}").attr('disabled', 'true');
       $('#pay-go-pro').modal('hide');
       if (user_id > 0) {
         $('#bank_transfer_user').val(user_id)
         $('#configreset_2').click();
      $("#blog-alert-2").html('');
      $('#bank_transfer_modal_2').modal({
             show: true
            });

       }
       else{
         video = '{{ID}}';
          $('#bank_transfer_video').val(video)
          $('#configreset').click();
      $("#blog-alert").html('');
      $('#bank_transfer_modal').modal({
             show: true
            });
       }
   }
</script>

<div class="modal fade matdialog" id="bank_transfer_modal_2" role="dialog" data-keyboard="false" style="overflow-y: auto;">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></span></button>
            <h4 class="modal-title">{{LANG bank_transfer}}</h4>
         </div>
         <form class="form form-horizontal" method="post" id="bank_transfer_form_2" action="#">
            <div class="modal-body dt_bank_trans_modal">
               <div id="blog-alert-2"></div>
               
               <?php echo html_entity_decode($pt->config->bank_description);?>
               
               <?php if (!empty($pt->config->bank_transfer_note)) { ?>
                  <div class="dt_user_profile hide_alert_info_bank_trans">
                     <span class="valign-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"></path></svg> Note:
                     </span>
                     <ul class="dt_prof_vrfy">
                        <li><?php echo $pt->config->bank_transfer_note;?></li>
                     </ul>
                  </div>
               <?php } ?>
               <p class="dt_bank_trans_upl_rec"><a href="javascript:void(0);" onclick="$('#bank_transfer_modal_2').addClass('up_rec_active'); return false"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z"></path></svg> {{LANG upload}}</a></p>
               <div class="upload_bank_receipts">
                  <div onclick="document.getElementById('thumbnail_2').click(); return false">
                     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z"></path></svg>
                     <p>{{LANG browse_to_upload}}</p>
                     <img class="bank_image_2" src="">
                  </div>
               </div>
               <input type="file" class="hidden" id="thumbnail_2" name="thumbnail" accept="image/*">
               <input name="image" type="file" id="upload" class="hidden">
               <input name="type" type="hidden" id="bank_transfer_type_2" class="hidden" value="bank">
               <input name="description" type="hidden" id="bank_transfer_des_2" class="hidden">
               <input name="user_id" type="hidden" id="bank_transfer_user" class="hidden">
               <input type="reset" id="configreset_2" value="Reset" class="hidden">
            </div>
            <div class="modal-footer">
               <div class="ball-pulse"><div></div><div></div><div></div></div>
               <button type="submit" class="btn btn-main">{{LANG publish}}</button>
            </div>
         </form>
      </div>
   </div>
</div>

<div class="modal fade matdialog" id="bank_transfer_modal" role="dialog" data-keyboard="false" style="overflow-y: auto;">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></span></button>
            <h4 class="modal-title">{{LANG bank_transfer}}</h4>
         </div>
         <form class="form form-horizontal" method="post" id="bank_transfer_form" action="#">
            <div class="modal-body dt_bank_trans_modal">
               <div id="blog-alert"></div>
               
               <?php echo html_entity_decode($pt->config->bank_description);?>
               
               <?php if (!empty($pt->config->bank_transfer_note)) { ?>
                  <div class="dt_user_profile hide_alert_info_bank_trans">
                     <span class="valign-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"></path></svg> Note:
                     </span>
                     <ul class="dt_prof_vrfy">
                        <li><?php echo $pt->config->bank_transfer_note;?></li>
                     </ul>
                  </div>
               <?php } ?>
               <p class="dt_bank_trans_upl_rec"><a href="javascript:void(0);" onclick="$('#bank_transfer_modal').addClass('up_rec_active'); return false"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z"></path></svg> {{LANG upload}}</a></p>
               <div class="upload_bank_receipts">
                  <div onclick="document.getElementById('thumbnail').click(); return false">
                     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z"></path></svg>
                     <p>{{LANG browse_to_upload}}</p>
                     <img id="receipt_img_preview" src="">
                  </div>
               </div>
               <input type="file" class="hidden" id="thumbnail" name="thumbnail" accept="image/*">
               <input name="image" type="file" id="upload" class="hidden">
               <input name="type" type="hidden" id="bank_transfer_type" class="hidden">
               <input name="description" type="hidden" id="bank_transfer_des" class="hidden">
               <input name="video_id" type="hidden" id="bank_transfer_video" class="hidden">
               <input type="reset" id="configreset" value="Reset" class="hidden">
            </div>
            <div class="modal-footer">
               <div class="ball-pulse"><div></div><div></div><div></div></div>
               <button type="submit" class="btn btn-main">{{LANG publish}}</button>
            </div>
         </form>
      </div>
   </div>
</div>